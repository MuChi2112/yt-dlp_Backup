import os
import requests
import subprocess

# Video name
video_name = "video"

# URL
base_url_front = ""

base_url_end = ""

# Range
start_file = 
end_file = 

# Path
save_path = r"C:\example\file\location\"


if not os.path.exists(save_path):
    os.makedirs(save_path)

# Changing to right folder
os.chdir(save_path)

## Download all .ts file

for i in range(start_file, end_file + 1):
    file_url = f"{base_url_front}{str(i)}{base_url_end}"
    response = requests.get(file_url, stream=True)
    

    if response.status_code == 200:
        file_path = os.path.join(save_path, f"{str(i).zfill(5)}.ts")
        

        with open(file_path, 'wb') as file:
            for chunk in response.iter_content(chunk_size=1024):
                if chunk:
                    file.write(chunk)
        print(f"file ( {i} / {end_file} ) download complete")
    else:
        print(f"file {i} failed download，HTTP status：{response.status_code}")

print("[info] All file complete download")

## Complete list of files converted to mp4

# Just the name of the txt file
filelist_name = 'filelist.txt'

# Searching for all .ts file
ts_files = [f for f in os.listdir(save_path) if f.endswith('.ts')]

# Sorting .ts file
ts_files.sort(key=lambda f: int(f.split('.')[0]))

# Writing .ts file name inside filelist.txt
with open(filelist_name, 'w') as filelist:
    for filename in ts_files:
        filelist.write(f"file '{filename}'\n")

print(f"[info] '{filelist_name}' generate complete.")


## Calling ffmpeg

# Calling ffmpeg to turn .ts into mp4
ffmpeg_command = f'ffmpeg -f concat -safe 0 -i filelist.txt -c copy {video_name}.mp4'
process = subprocess.run(ffmpeg_command, shell=True, check=True)

# Checking if ffmpeg working
if process.returncode == 0:
    print("[info] complete")
else:
    print("[info] failed")

## Delete .ts file and txt file

for f in os.listdir('.'):
    if f.endswith('.ts'):
        os.remove(f)
        print(f"[info] ( {f} / {end_file} ) deleted")

# delete .txt file
if os.path.exists('filelist.txt'):
    os.remove('filelist.txt')
    print("[info] remove filelist.txt")

print("[info] All .ts file and .txt file remove")



'''
S S S S % ? S S # # # S S # # # S + ; : : : : , , , , , , + + + + + + * ? * + + S # S S S S S S S S S S S S S S S S S S # # S % ? + + + + + ; + : : , , , , , ,
S S # S % ? % S # # # S # # # # * ; : : : : , , , , , , : + + + + + * ? + + + * % S # S S S S S S S S S S S # S # # # # % * + + + + + + + : , + ; : : , , , , ,
S S S # % ? S S S # # S # # @ % ; ; : : : , : , , , , , ; + + + + + * + + + * % % % % % S S % % % % S S S S % S S % % % * + + + + + + + : , , : + : : , , , , .
S S S S S ? S S S S S S # # # + ; : : : : : , , , , , , ; + + + + + + + + + % % % % % % S * + + + + * * * + + + + + + * % + + + + + ; : , , , , + + : : , , : ;
S S S S S % % S S S % S # @ ? ; : : : : : , , , , , , , ; + + + + + + + + ? % % % % % % % + + + + + + + + + + + + + + + ? ? + + + ; , , , , , , : * : : : * * *
S S S S S S S S S S % % # S ; : : : : : : , , , , , , , ; + + + + + + + * % % % % % % S ? + + + + + + + * + + + + + + + + ? + ; , , , , , , , , , * ; + S ? + %
S S S S S S S S S % % % S + : : ; : : : : , , , , , , , ; + + + + + + + % % % % % % % S + + + + + + + + + + + + + + + + + + ; , , , , , , , , , , ; % # % + ? %
S S S S S S S S S % ? S ? ; : ; : : : : : , , , , , , , ; + + + + + + ? % % % % % % % % + + + + + + + + + * + + + + + + : , + , , , , , , , , , , : # S * ? S %
S S S S S S % S S % ? % + : : ; : : : : : , , , , , , ; + + + + + + * % % % % % % % % ? + + + + + + + + + + + + + + ; : , , ; : , , , , , , , , , , S ? * S % %
S S S S S S S % S S % * : : ; : : : : : , , , , , , : ; : : + + + + ? % % % % % % % % * + + + + + + + + + + * + + : , , , , : ; , , , , , , , , , , * ? % S S %
S S S S S S % % % S S ; : ; : : : : : : , , , , , : : : , , ; + + * % % % % % % % % % + + + + + + + + + + + + ; : , , , , , , ; , , , , , , , , , , + % S S S %
S S S S S S % % % S * : : ; : : : : : , , , , , : : , : , , , ; + ? % % % % % % % % % + + + * + + + + + + ; : : , , , , , , , ; : , , , , , , , , , : % S S S S
S S S S S % % % S % ; : ; : : : : : : , , , , : : , : , , , , , ; % % % % % % % % % ? + + + * + + + + ; : , , : , , , , , , , : : , , , , , , , , , : S S S S S
S S S % S % % % S + : ; ; : : : : : : , , , : : , : : , , , , , ; ? ? % % % % % % % ? + + + * + + ; : , , , , : : , , , , , , , : , , , , , , , , , , % # S S %
S % % % % % % S ? ; : ; : : : : : : : , , : : , , ; , , , , , : ; ? * * ? ? ? % % % * + ; + * : , , , , , , , , ; , , , , , , , : , , , , , , , , , , % # S S ?
% % S % % % % % ; : ; ; : : : : : : : : , : , , ; : , , , , : ; + ? * * * * * * * ? ; , , ; + , , , , , , , , , ; , , , , , , , : , , , , , , , , , , ? # S S ?
% % % % % % S * : : ; ; : : : : : : : , : : , : + , , , , , ; ; + * * * + * * * * * : , , + + , , , , , , , , , : : , , , , , , : , , , , , , , , , , * # # S ?
% % % % % % ? : ; : + : : ; : : : : , : : , , * ; , , , , , * : * * * * + + * * * * , , , * + , , , , , , , , , , : , , , , , , : : , , , , , , , , , + # # % ?
% ? % % % S + : ; ; ; : : ; : : : : : : , , + ? , , , , , ; ? , * * * + + + + + * * , , : ? * , , , , , , , , , , : , , , , , , : : , , , , , , , , , ; # # % ?
% % % % % % : : ; + ; : ; : : : : : : : , ; % + , , , , , % * , * * * + + + + + * + , , : % * , , , , , , , , , , : : , , , , , : : , , , , , , , , , ; # # % %
% % % % % * : ; ; + ; : ; : : : : : : , ; * * : , , , : + * ; , * * * * * * + + * + , , ; % ? : , , , , , , , , , , : , , , , , : : , , , , , , , , , : # # ? %
% % % % % : : ; ; + : : ; : : : : : : : + ; ; , , , : + + ; ; , * * * * * * * * * + . , + + * ; , , , , , , , , , , , , , , , , : : , , , , , , , , , : @ # ? S
% % % % + : : ; + + : ; : : : : ; : : + ; : : , , : ; + ; ; : , + * * * * * * * * + , , + ; ; + , , , , , , , , , , , , , , , , : ; , , , , , , , , , : @ # * S
% % % ? ; : : ; + ; : ; : : : : ; : + ; , : : , : ; * ; : , : , + * * * * * * * * + , : + ; , ; ; , , , , , , , , , , : , , , , : ; , , , , , , , , , : @ # * S
% % % + : : ; ; + ; ; ; : : : ; ; + ; , , ; : : : + + ; , : , , ; * * * * * * * * + , : + : , , ; : , , , , , , , , , : , , , , : ; , , , , , , , , , : @ # ? %
% % ? ; ; : ; + + ; ; : : : + ; + ; , , , ; : : ; + : : , : , , : * * * * * * * * + , ; ; , , , , ; : , , , , , , , , : , , , , : ; , , , , , , , , , : @ # ? %
? % ; ; ; : ; + + ; ; : : ; + + ; : , , : ; ; ; + ; , , ; : , : , * * * * * * * * + , ; ; , , , , : ; , , , , , , , , : , , , , : : , , , , , , , , , ; @ @ % %
% * ; ; : : ; * + ; ; : ; + ? * : , , , : ; ; + ; , , , ; + , : , ; ? * * * * * * * , + : , , , , , ; ; , , , , , , , : : , , , , : , , , , , , , , , ; @ @ S %
? + ; ; ; : ; * + ; : : + * % + ; ; ; : ; ; ; + : , , , , + ; : : : ? * * * * * * * : + , , , , , , , ; : , , , , , , , : , , , , , , , , , , , , , , ; @ @ S %
+ + ; ; ; : + * + ; : ; * + + ; ? @ # # * + + ; , , , , , : + : : , + ? * * * * * ? ; ; , , , , , , , , ; : , , , , , , : , , , , , , , , , , , , , , + @ # # %
+ ; ; ; : : + * + ; : * * ; + ; ; @ @ @ % ? S % : , , , , : : , : : : ? * * * * * ? + : , , , , , , , , : ; : , , , , , : , , , : , , , , , , , , , , * @ # # S
+ ; ; ; ; ; + * + ; + * + + + + : S * + + * # # % : , , , , ; , : ; , * ? * * * * ? + , , , , , , , , , , ; * : , , , , : : , , : , , , , , , , , , . ? @ # # S
+ ; ; ; ; ; + * + ; * * ; : + * , ? + ; ; ; * # # ? : , , , ; , , ; : ; ? * * * * ? * , , , , , , , , , , : ; ; : : , , : : : , : , , , , , , , , , , ? # # # #
+ ; ; ; ; ; + * + + * + : : + * , + + + + + # # # @ * : , , ; : : : ; , * ? * * * ? ? ; : , , , , , , , , : , , : ; ; : : ; : : , , , , , , , , , , , % # # # #
+ ; ; ; ; ; + * + ? % ; ; ; + * : ; + ; * * # % % # # ; : , : : : , ; : ; % ? * * ? % + ; ; ; : : : , , , ; , , , , : ; ; ; ; ; , , , , , , , , , , , % # S S S
+ ; ; ; ; ; + ? + % S + : + + * : : : : ; * S % ? + # ? : , : ; : , : + : * ? * * * ? : , , , , , , , , , ; , , , , , : ; + + : , , , , , , , , , , : * S # S S
+ ; ; ; ; ; + ? * % % % ; : + ? : : , , , * % ? * + % S : : : ; : : , ; * : % ? * * ? : , , , , , , , , , ; : , , , , , : * + , , , , , , , : , , , : ; + ? S S
+ ; ; ; ; ; + ? % % % % ? : , + : : : , , + ? ; ; * ? S ; , , ; ; : , , + + + % ? * ? + , , , , , , , , , , ; : , , , , : + ; , , , , , , : : , , , ; ; ; ; ? S
+ ; ; ; ; ; ; % S % % % S ? ; ; : : : , , : ; , , + ; % ; , , : ; ; : , : * * ? % * ? ? , , , , , , , , , , : + ; : , , , : : , , , , , : : , , , , ; ; ; ; ? *
+ ; ; ; ; ; ; ? % % % % % ? % * : : : : : , , , , : : ? : , , : ; ; : , , ; ? ? % % ? % + . , , , , , , , , , ; * + ; , , ; , , , , , : ; , , , , , + ; ; ; ? ;
+ ; ; ; ; + ; * % % % % % ? ? ? : : : : : : : , , , : + , , , , : ; ; : , : + % ? % ? ? ? : : , , , , , , , , , * ; + ; : ; , , , , : : : , , , , : + + ; + * ;
* ; + ; ; ; ; + % % % % % ? ? * : : : : : : : : , , : : , , , , , ; ; ; : , : + ; + ? ? ? ? * * * ; : , , , , , ; : ; + + : , , , : : : , , , , , : + + + + * ;
* + + ; ; ; + + % % % % ? ? ? * : : : : : : : : : , , , , , , , , : : : ; : : ; , , + ? % S # # # S S S * : , , ; : : ; * , , , : : : , , , , , , ; + + + + + ;
* + + ; ; ; + + ? % % % ? ? ? * : : : : : : : : : , , , , , , , , , , , : : : , , : : : + * ? # # # # @ @ S + : ; : : + + , , : : : : , , , , , , + + + + + + +
* * + + ; ; + * + % % % * * ? * : : ; : : : : : : , , , , , , , , , , , , , , , , , , : ; ; S % % ? S @ @ @ # * ; : ; * , , : : : : , , , , , , , + + * + + + +
* * + + ; ; + * + ? % % * * ? * : : : : : : : : , , , , , , , , , , , , , , , , , , , : : + S ? ? + ? S # @ @ @ ? * * : , : : : ; , , , , , , , : + * * + + + +
* * + * + ; ; + ? + % % * + ? * : : : : : : : : , , , , , , , , , , , , , , , , , , , , . ? ? + ; ? ? % # # % @ @ S * , : : : : : , , , , , , , : * * * + ; + +
* * * * + ; ; + % * * % + + ? * : : : : : : : , , , , , , , , , , , , , , , , , , , , , , + ; : : + ; ? S # ; S @ # + ; : : : ; , , , , , , , , ; * * + ; + + +
* * * + + + ; + * % + ? + ; * * : : : : : : : , , , , , , , , , , , , , , , , , , , , , , , , , , : : + S S : ? % + : : : : ; : , , , , : , , , + * * ; + * + *
* + * + + + + ; + % % + ; + + ? ; : : : : , , , , , , , , , , , , , , , , , , , , , , , : : , , , , : ; S + + + + ; : : : ; : , , , , , : , , , + * * + * + + *
* + * + * + + ; + ? S ? ; ; + * + : : : , , , , , , , , , , , , , , , , , , , , , , , : : : : : , , , * + : ; ; + : : : ; ; , , , , , , : , , : * ? * * * + ; +
* + + + + + + + ; * S * + + + + ? ; , , , , , , , , , , , , , , , , , , , , , , , , : : : : : : : : : ; : : : + ; : : : ; : : : , : , , : , , ; ? ? ? ? + + ; :
% * + * + + + + ; + % * + + + + * * : : , , , , , , , , , , , , , , , , , , , , , , : : : : : : : : : : : : + + : : : ; : : ; : , : , : : , , + % ? ? ? + + ; :
% ? + * * ; + + + ; * ? + + + * + ? + , , , , , , , , , , , , , , , , , , , , , , : : : : : : : : : : : : ; * ; : ; ; : : ; ; : : : , : , , : ? % ? ? ? * + ; :
? % ? + ? + ; ; ; ; : * ? + + * ? % % ; , , , , , , , , , , , , , , , , , , , , , : : : : : : : : : : : : * ; : ; ; ; ; ; ; ; : : : , : , , : % * ? ? ? ? + ; :
* % S ? * % * ; ; ; ; : + + * ? % % S ? : , , , , , , : : , , , , , , , , , , , , : : : : : : : : : : : * + : ; ; ; ; ; ; ; ; ; : , , : , , + ? ; + % ? ? * ; :
? % S S % % S ? * + + ; ; ; + * ? S S S ? : , , , , , ; ? + + : : : : , , : + , , , : : : : : : : : : + * ; ; ; ; ; ; ; ; ; ; ; : , : : , , ? * : , ; ? ? * ; :
S ? % S % % % % S S * * * * ? S S S S S S * , , , , , , ? S S * * * * + ; ; % , , , : : : : : : : : ; ? ; ; ; ; ; ; ; ; ; ; ; ; : , : : , : ? ; : : ; ? ? * ; :
S S % S % % % % % % * * + ? % S # # # # S # * , , , , , + S * * * * * * * * * , , , : : : : : : : : * + ; ; ; ; ; ; ; ; ; ; ; ; , , ; : , + ? + ? ? % ? % * ; :
S S S S S S % % S ? * * * % S S S S S S # # # * , , , , , + * * * * * * * * : , , , , : : : : : : + * ; ; ; ; ; ; ; ; ; ; ; ; ; , : ; , , ? % % ? ? ? ? % * + :
S S S S S S S S % * * * * S # # # S S S % S S # * , , , , , ; ; + + + + ; ; , , , , , , , : : , + * ; ; ; ; ; ; ; ; ; ; ; ; ; : : ; ; , : % ? ? ? ? ? ? % * + :
% % % % S S S # ? + * * % # # # # # # # # # S S S + , , , , : : , : : : : , , , , , , , , , , : * ; ; ; ; ; ; ; ; ; ; ; : ; ; : : ; : , + % ? ? ? ? ? ? ? + * ;
% % % % % % % % * * * * S # # # # # # # # # # # S S + , , , , , , : : , , , , , , , , , , , : + ; ; + + + ; ; + ; ; ; ; : ; : : : ; : : ? % ? ? ? ? ? ? ? + * +
% % % % % % % % + * * ? # # # # # # # # # # # # S S # * , , , , , , , , , , , , , , , , , : + ; ; + + + + + + + ; ; ; : : ; : : : ; : ; % % % ? ? ? ? ? * + * +
% ? ? % % % % ? + * * % # # # # # # # # # # # S S S # # * , , , , , , , , , , , : : ; + + + ; + + + + + + + + ; ; ; ; ; ; ; : : ; ; , * % % % % % ? % ? * + * +
% ? ? % % % % + + * * S # # # # # # # # # # # S % S # S S % + : : : : : : ; ; + * * * * * + + + + + + + + + ; ; ; ; ; ; ; : ; : * ; : % % % % % % % % ? + + * +
% % % % % % % + * * * S # # # # # # # # # # # S S S # S S S S S S # % * * * * * * * * * + + + + + + ; + + ; ; ; ; ; ; ; ; ; ; ; % : * S % % % % % % % ? + + * *
% % % % % % * + * * ? S # # # # # S S S S S # S S S # S S S S S S # # ? * * * * * * + + + + + + ; ; + + ; ; ; ; ; ; ; ; ; ; : S * : # @ # S % % % % % % + + * *
% % % % % % + + * * ? S # # S S S S S S S S S S S # # S S S S S S @ @ # * * * * + ; + + + ; ; ; + + ; ; ; ; ; ; ; ; ; ; ; ; ? S ; ? @ @ @ @ # S S % % % + + * *
% % % % % ? ; + * * % S # S S S S S S S S S S S S # # S S S S S S @ @ @ S * + + + + + ; ; ; + + ; ; ; ; ; ; ; ; ; ; ; + ; ? @ % ; S S # @ @ # @ @ # S % * + ? %
% % % % % + ; * * * % S # S S S S S S S S S S S S # S % S S S S S @ @ S ? + + + + ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; + * % @ @ + % # % % S # @ @ # # S % ? + % @
S % % % % + + * * ? % S S S S S S S S S S % % S S # S % % ? ? ? ? ? * + + + ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; * ? S @ @ S + @ @ # S % % S # # # % % % + # S
S S % % % ; + * * ? % S S S S % % ? ? ? * ? ? S S # S S S S % ? ? * + + ; ; ; ; ; ; ; ; ; ; ; ; ; ; + ; ; ; ; ; ? S # @ # @ ? S @ # @ # S S % % S S % % % ? # %
% S % % ? ; + * ? ? % % ? ? ? ? ? % % % S S S S S # S S % ? * + ; ; ; ; ; ; ; ; ; ; ; + + + + + * * + ; ; ; * % # @ @ @ @ S % @ # # # # # # S S S S % S % S # %
% % S S * + * * * ? ? ? ? ? % % % % % % % % % S S S S S S % ? * * * + + + + + * % % S S S # @ @ S + ; ; + % S # @ @ @ @ # S @ # # # # # # @ # S S # S S S # S ?
S S # # S S S S S S S S S S S % % % % S S % % % % S S % % % ? ? % % * @ @ S ? # @ @ @ @ @ @ # ? ; ; + ? S S # @ @ @ @ @ # # @ @ @ # # # # # # S S # S S # # % ?
S S S S # # # # # # # # # # # # # # # S # # # # # # # S ? ? ? ? ? * * @ @ @ @ @ @ # @ @ # % * * ? % S S S # @ @ @ @ @ @ @ @ @ @ # # # # # # # S S # S S # S % %
% % % % % % S # # # # # # # # # # # # # # # # # S % % % % ? ? ? ? * % @ # # # @ @ @ # @ # S # # S S S S @ @ @ @ @ @ @ @ @ @ @ @ @ @ # @ # S # S # # S # # % % %
% % % % % S S S S # # # # # # # # # # # # S % ? ? ? % S % ? ? ? ? + % # # # # # @ % ? ? ? ? S S S S # # # @ @ @ @ @ @ @ @ @ @ @ @ @ # @ # # # S # # S # S % % %
% % S S S S S S S S # # # # # # # # S % ? ? ? ? % % S S % ? ? * + ? * * * ? # # @ ? ; + + % S S # # # S # # @ @ @ @ @ @ @ @ @ @ @ @ @ # # # # S # # # # S % % #
'''